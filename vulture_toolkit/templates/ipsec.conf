#This file is part of Vulture 3.
#
#Vulture 3 is free software: you can redistribute it and/or modify
#it under the terms of the GNU General Public License as published by
#the Free Software Foundation, either version 3 of the License, or
#(at your option) any later version.

#Vulture 3 is distributed in the hope that it will be useful,
#but WITHOUT ANY WARRANTY; without even the implied warranty of
#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#GNU General Public License for more details.

#You should have received a copy of the GNU General Public License
#along with Vulture 3.  If not, see http://www.gnu.org/licenses/.

########################## WARNING ###############################
# Don't edit this file, it is automatically generated by Vulture #
########################## WARNING ###############################

config setup
        strictcrlpolicy=no
        uniqueids=never
        charondebug="ike 2, knl 2, cfg 2"

conn %default
        type={{conf.ipsec_type}}
        keyexchange={{conf.ipsec_keyexchange}}
        authby={{conf.ipsec_authby}}
        fragmentation={% if conf.ipsec_fragmentation %}yes{%else%}no{%endif%}
        forceencaps={% if conf.ipsec_forceencaps %}yes{%else%}no{%endif%}
        ike={{conf.ipsec_ike}}
        esp={{conf.ipsec_esp}}
        dpdaction={{conf.ipsec_dpdaction}}
        dpddelay={{conf.ipsec_dpddelay}}
        rekey={% if conf.ipsec_rekey %}yes{%else%}no{%endif%}
        ikelifetime={{conf.ipsec_ikelifetime}}
        keylife={{conf.ipsec_keylife}}
        right={{conf.ipsec_right}}
        leftsubnet={{conf.ipsec_leftsubnet}}
        leftid=@{{conf.ipsec_leftid}}


{% set vlans = conf.ipsec_rightsubnet.split(',') %}
{% for vlan in vlans%}
conn vlan_{{ loop.index }}
        rightsubnet={{ vlan }}
        auto=start

{% endfor %}

