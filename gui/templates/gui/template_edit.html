{% extends "layout.html" %}
{% load i18n %}
{% load staticfiles %}

{% block sidebar %}
    {% include "sidebar.html" %}
{% endblock %}

{% block navleft %}
    <li><h3><i class="fa fa-tasks"></i>&nbsp;{% trans "Template -> Edit" %}</h3></li>
{% endblock %}


{% block content %}
	<div class="row">
		<form class="form-horizontal bootstrap-validator-form" action="/template/edit/{% if object_id %}{{object_id}}{% endif %}" method="post" novalidate="novalidate">
      {% csrf_token %}
      <div class="x_panel">
        <div class="x_title">
          <h2>{% if template.name %} {% trans "Change settings for template " %} "{{template.name}}" {% else %} {% trans "New template" %} {% endif %}</h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a href="/template/"><button class="btn-cancel" type="button">{% trans "CANCEL"  %}</button></a></li>
              <li><button id="save" class="btn-save" type="submit">{% trans "SAVE" %}</button></li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
          <div class="" role="tabpanel" data-example-id="togglable-tabs">
            <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
              <li role="presentation" class="active"><a href="#tab_content1" id="home-tab" role="tab" data-toggle="tab" aria-expanded="true">{% trans "Global settings" %}</a>
              </li>
              <li role="presentation" class=""><a href="#tab_content2" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Style" %}</a>
              </li>
              <li role="presentation" class=""><a href="#tab_content3" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Login" %}</a>
              </li>
              <li role="presentation" class=""><a href="#tab_content4" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Logout" %}</a>
              </li>
                <li role="presentation" class=""><a href="#tab_content5" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Learning" %}</a>
                </li>
                <li role="presentation" class=""><a href="#tab_content6" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Self-Service" %}</a>
                </li>
                <li role="presentation" class=""><a href="#tab_content7" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Password" %}</a>
                </li>
                <li role="presentation" class=""><a href="#tab_content8" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Email & Dialogs" %}</a>
                </li>
                <li role="presentation" class=""><a href="#tab_content9" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "OTP" %}</a>
                </li>
                <li role="presentation" class=""><a href="#tab_content10" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Message" %}</a>
                </li>
                <li role="presentation" class=""><a href="#tab_content11" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "HTML Errors" %}</a>
                </li>
                  <li role="presentation" class=""><a href="#tab_content12" role="tab" id="profile-tab" data-toggle="tab" aria-expanded="false">{% trans "Users registration" %}</a>
                </li>
            </ul>
            <div id="myTabContent" class="tab-content">
              <div role="tabpanel" class="tab-pane fade active in" id="tab_content1" aria-labelledby="home-tab">
                <div class="row">
                  <div class="form-group">
                    <label class="col-sm-4 control-label">{% trans "Friendly name" %}</label>
                    <div class="col-sm-5">
                      {{form.name}}
                      {{form.name.errors}}
                    </div>
                  </div>
                </div>
              </div>

              <div role="tabpanel" class="tab-pane fade" id="tab_content2" aria-labelledby="profile-tab">
                <div class="row">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">{% trans "Cascading Style sheet " %}</label>
                        <div class="col-sm-7">
                        <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "Cascading Style Sheet of template"%}" data-placement="right" id="id_css" name="css">{{ template.css|safe }}</textarea>
                        {{form.css.errors}}
                        </div>
                    </div>
                </div>
              </div>

              <div role="tabpanel" class="tab-pane fade" id="tab_content3" aria-labelledby="profile-tab">
                <div class="row">
                  <div class="form-group">
                    <div class="template_helper col-sm-12">
                    {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                    <br><br>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-offset-3">
                    <label class="col-sm-2 control-label">{% trans "Portal Template" %}</label>
                  </div>
                </div>
                <div class="row">
                  <div class="template_helper col-md-3">
                    {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                    <ul>
                      <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;error_message&#125;&#125;</color></b>: {% trans "The error message when authentication goes wrong"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;form_begin&#125;&#125;</color></b>: {% trans "The starting &lt;form action='...'&gt;"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;form_end&#125;&#125;</color></b>: {% trans "The ending &lt;/form&gt;"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;input_login&#125;&#125;</color></b>: {% trans "The Login Input for authentication portal"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;input_password&#125;&#125;</color></b>: {% trans "The Password Input for authentication portal"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;input_submit&#125;&#125;</color></b>: {% trans "The 'login' button"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;lostPassword&#125;&#125;</color></b>: {% trans "The URI for lost password"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;captcha&#125;&#125;</color></b>: {% trans "Image captcha"%}</li>
                      <li><b style="color:#39454C;">&#123;&#123;input_captcha&#125;&#125;</color></b>: {% trans "The captcha input"%}</li>
                    </ul>
                  </div>
                  <div class="col-md-5">
                      <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Content for the login page"%}" data-placement="right" id="id_html_login" name="html_login">{{ template.html_login|safe }}</textarea>
                      {{form.html_login.errors}}
                  </div>
                  <div class="col-md-2">
                    <div class="form-group">
                      <label class="control-label">{%  trans "Login field name" %}</label>
                      {{ form.login_login_field }}
                      {{ form.login_login_field.errors }}
                    </div>
                    <div class="form-group">
                      <label class="control-label">{%  trans "Password field name" %}</label>
                      {{ form.login_password_field }}
                      {{ form.login_password_field.errors }}
                    </div>
                    <div class="form-group">
                      <label class="control-label">{%  trans "Captcha field name" %}</label>
                      {{ form.login_captcha_field }}
                      {{ form.login_captcha_field.errors }}
                    </div>
                    <div class="form-group">
                      <label class="control-label">{%  trans "Submit button field name" %}</label>
                      {{ form.login_submit_field }}
                      {{ form.login_submit_field.errors }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="form-group">
                    <label class="col-sm-4 control-label">&nbsp;</label>
                    <div class="col-sm-5">
                      <button id="preview" class="btn-preview-login btn-save">{% trans "PREVIEW" %}</button>
                      <a href="#" data-toggle="modal" data-target="#show_images">
                      <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                      </a>
                    </div>
                  </div>
                </div>
              </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content4" aria-labelledby="profile-tab">
                  <div class="row">
                      <div class="form-group">
                          <div class="template_helper col-sm-12">
                          {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                          <br><br>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-6">
                        <label class="col-md-9">{% trans "Logout Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-6">
                      {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                      <ul>
                          <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                          <li><b style="color:#39454C;">&#123;&#123;app_url&#125;&#125;</color></b>: {% trans "The application url (needed to redirect the user)"%}</li>
                      </ul>
                    </div>
                    <div class="col-md-6">
                      <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Content for the logout page"%}" data-placement="right" id="id_html_logout" name="html_logout">{{ template.html_logout|safe }}</textarea>
                      {{form.html_logout.errors}}
                    </div>
                  </div>
                  <div class="row">
                    <label class="col-sm-4 control-label">&nbsp;</label>
                    <div class="col-sm-5">
                      <button id="preview" class="btn-preview-logout btn-save">{% trans "PREVIEW" %}</button>
                      <a href="#" data-toggle="modal" data-target="#show_images">
                        <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                      </a>
                    </div>
                  </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content5" aria-labelledby="profile-tab">
                  <div class="row">
                    <div class="form-group">
                      <div class="template_helper col-sm-12">
                        {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                        <br><br>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-3">
                      <label class="col-md-9">{% trans "Learning Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-3">
                      {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                      <ul>
                          <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                          <li><b style="color:#39454C;">&#123;&#123;form_begin&#125;&#125;</color></b>: {% trans "The starting &lt;form action='...'&gt;"%}</li>
                          <li><b style="color:#39454C;">&#123;&#123;form_end&#125;&#125;</color></b>: {% trans "The ending &lt;/form&gt;"%}</li>
                          <li><b style="color:#39454C;">&#123;&#123;input_submit&#125;&#125;</color></b>: {% trans "All the fields required for learning + the 'login' button"%}</li>
                      </ul>
                    </div>
                    <div class="col-md-5">
                      <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Content for the learning page"%}" data-placement="right" id="id_html_learning" name="html_learning">{{ template.html_learning|safe }}</textarea>
                      {{form.html_learning.errors}}
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label class="control-label">{%  trans "Submit button name" %}</label>
                        {{ form.learning_submit_field }}
                        {{ form.learning_submit_field.errors }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-4 control-label">&nbsp;</label>
                      <div class="col-sm-5">
                        <button id="preview" class="btn-preview-learning btn-save">{% trans "PREVIEW" %}</button>
                          <a href="#" data-toggle="modal" data-target="#show_images">
                        <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                        </a>
                      </div>
                    </div>
                </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content6" aria-labelledby="profile-tab">
                  <div class="row">
                    <div class="form-group">
                      <div class="template_helper col-sm-12">
                        {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                        <br><br>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-6">
                      <label class="col-sm-2 control-label">{% trans "Self-service Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-6">
                      {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                      <ul>
                        <li><b style="color:#39454C;">&#123;&#123;application_list&#125;&#125;</color></b>: {% trans "A list of applications the user has access to. Applications have the following attributes"%}</li>
                      </ul>
                      <ul>
                        <li><b style="color:#39454C;">&#123;&#123;name&#125;&#125;</color></b>: {% trans "The friendly name of the application"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;uri&#125;&#125;</color></b>: {% trans "The public URI of the application"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;status&#125;&#125;</color></b>: {% trans "Indicates if the user is logged on it"%}</li>
                      </ul>
                      <ul>
                        <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;changePassword&#125;&#125;</color></b>: {% trans "The URI to change password"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;logout&#125;&#125;</color></b>: {% trans "The URI to disconnect from all applications"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;username&#125;&#125;</color></b>: {% trans "The name of the current user"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;error_message&#125;&#125;</color></b>: {% trans "The message telling what happens"%}</li>
                      </ul>
                    </div>
                    <div class="col-md-6">
                      <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_html_self" name="html_self">{{ template.html_self|safe }}</textarea>
                          {{form.html_self.errors}}
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-4 control-label">&nbsp;</label>
                      <div class="col-sm-5">
                        <button id="preview" class="btn-preview-self btn-save">{% trans "PREVIEW" %}</button>
                        <a href="#" data-toggle="modal" data-target="#show_images">
                          <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content7" aria-labelledby="profile-tab">
                  <div class="row">
                    <div class="form-group">
                      <div class="template_helper col-sm-12">
                        {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                        <br><br>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-3">
                      <label class="col-md-12">{% trans "Password Management Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-3">
                        {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                        <ul>
                            <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;form_begin&#125;&#125;</color></b>: {% trans "The starting &lt;form action='...'&gt;"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;form_end&#125;&#125;</color></b>: {% trans "The ending &lt;/form&gt;"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;input_password_old&#125;&#125;</color></b>: {% trans "The Old password Input"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;input_password_1&#125;&#125;</color></b>: {% trans "The New password Input (#1)"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;input_password_2&#125;&#125;</color></b>: {% trans "The New password Input (#2)"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;input_email&#125;&#125;</color></b>: {% trans "The email Input, to recover password"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;input_submit&#125;&#125;</color></b>: {% trans "The 'submit' button"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;dialog_change&#125;&#125;</color></b>: {% trans "Boolean: True if password change"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;dialog_lost&#125;&#125;</color></b>: {% trans "Boolean: True if lost password"%}</li>
                            <li><b style="color:#39454C;">&#123;&#123;error_message&#125;&#125;</color></b>: {% trans "The message telling what happens"%}</li>
                        </ul>
                    </div>
                    <div class="col-md-5">
                        <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_html_password" name="html_password">{{ template.html_password|safe }}</textarea>
                        {{form.html_password.errors}}
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label class="control-label">{%  trans "Old password field name" %}</label>
                        {{ form.password_old_field }}
                        {{ form.password_old_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "New password field name" %}</label>
                        {{ form.password_new1_field }}
                        {{ form.password_new1_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "New password confirmation field name" %}</label>
                        {{ form.password_new2_field }}
                        {{ form.password_new2_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Email field name" %}</label>
                        {{ form.password_email_field }}
                        {{ form.password_email_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Submit button field name" %}</label>
                        {{ form.password_submit_field }}
                        {{ form.password_submit_field.errors }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <label class="col-sm-4 control-label">&nbsp;</label>
                    <div class="col-sm-5">
                      <button id="preview" class="btn-preview-password btn-save">{% trans "PREVIEW" %}</button>
                      <a href="#" data-toggle="modal" data-target="#show_images">
                        <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                      </a>
                    </div>
                  </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content8" aria-labelledby="profile-tab">
                    <div class="row">
                        <div class="form-group">
                            <div class="template_helper col-sm-12">
                            {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                            <br><br>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "Email From:" %}</label>
                            <div class="col-sm-6">
                                {{form.email_from}}
                                {{form.email_from.errors}}
                            </div>
                            <div class="template_helper col-sm-12 col-md-4">
                                {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                                <ul>
                                    <li><b style="color:#39454C;">&#123;&#123;resetLink&#125;&#125;</color></b>: {% trans "The URI to change password"%}</li>
                                    <li><b style="color:#39454C;">&#123;&#123;app.name&#125;&#125;</color></b>: {% trans "The Name of the app for which we request a password reset"%}</li>
                                    <li><b style="color:#39454C;">&#123;&#123;app.url&#125;&#125;</color></b>: {% trans "The URL of the app for which we request a password reset"%}</li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "Email Subject:" %}</label>
                            <div class="col-sm-6">
                                <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_email_subject" name="email_subject">{{ template.email_subject|safe }}</textarea>
                                {{form.email_subject.errors}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "Email Body:" %}</label>
                            <div class="col-sm-6">
                                <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_email_body" name="email_body">{{ template.email_body|safe }}</textarea>
                                {{form.email_body.errors}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "'Password has been changed'" %}</label>
                            <div class="col-sm-6">
                                <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_error_password_change_ok" name="error_password_change_ok">{{ template.error_password_change_ok|safe }}</textarea>
                                {{form.error_password_change_ok.errors}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "'Password cannot be changed'" %}</label>
                            <div class="col-sm-6">
                                <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_error_password_change_ko" name="error_password_change_ko">{{ template.error_password_change_ko|safe }}</textarea>
                                {{form.error_password_change_ko.errors}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "'An email has been sent'" %}</label>
                            <div class="col-sm-6">
                                <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_error_email_sent" name="error_email_sent">{{ template.error_email_sent|safe }}</textarea>
                                {{form.error_email_sent.errors}}
                            </div>
                        </div>
                    </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content9" aria-labelledby="profile-tab">
                  <div class="row">
                    <div class="form-group">
                      <div class="template_helper col-sm-12">
                        {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                        <br><br>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-3">
                      <label class="col-sm-2 control-label">{% trans "OTP Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-3">
                      {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                      <ul>
                        <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;error_message&#125;&#125;</color></b>: {% trans "The error message when OTP code verification goes wrong"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;form_begin&#125;&#125;</color></b>: {% trans "The starting &lt;form action='...'&gt;"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;form_end&#125;&#125;</color></b>: {% trans "The ending &lt;/form&gt;"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_key&#125;&#125;</color></b>: {% trans "The key input"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_submit&#125;&#125;</color></b>: {% trans "The 'login' button"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;resend_button&#125;&#125;</color></b>: {% trans "The 'resend mail/sms' button"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;qrcode&#125;&#125;</color></b>: {% trans "The 'src' html tag of the TOTP QRcode"%}</li>
                      </ul>
                    </div>
                    <div class="col-md-5">
                      <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Content for the OTP page"%}" data-placement="right" id="id_html_otp" name="html_otp">{{ template.html_otp|safe }}</textarea>
                      {{form.html_otp.errors}}
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label class="control-label">{%  trans "OTP key field name" %}</label>
                        {{ form.otp_key_field }}
                        {{ form.otp_key_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "OTP submit field name" %}</label>
                        {{ form.otp_submit_field }}
                        {{ form.otp_submit_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "OTP resend field name" %}</label>
                        {{ form.otp_resend_field }}
                        {{ form.otp_resend_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Onetouch answer message" %}</label>
                        {{ form.otp_onetouch_field }}
                        {{ form.otp_onetouch_field.errors }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-4 control-label">&nbsp;</label>
                      <div class="col-sm-5">
                        <button id="preview" class="btn-preview-otp btn-save">{% trans "PREVIEW" %}</button>
                        <a href="#" data-toggle="modal" data-target="#show_images">
                        <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content10" aria-labelledby="profile-tab">
                  <div class="row">
                    <div class="form-group">
                      <div class="template_helper col-sm-12">
                      {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                      <br><br>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-6">
                      <label class="col-sm-2 control-label">{% trans "Message Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-6">
                      {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                      <ul>
                        <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;message&#125;&#125;</color></b>: {% trans "The message"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;link_redirect&#125;&#125;</color></b>: {% trans "The redirect link to home"%}</li>
                      </ul>
                    </div>
                    <div class="col-md-6">
                        <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Content for the login page"%}" data-placement="right" id="id_html_message" name="html_message">{{ template.html_message|safe }}</textarea>
                        {{form.html_message.errors}}
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-4 control-label">&nbsp;</label>
                      <div class="col-sm-5">
                        <button id="preview" class="btn-preview-message btn-save">{% trans "PREVIEW" %}</button>
                        <a href="#" data-toggle="modal" data-target="#show_images">
                        <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>


                <div role="tabpanel" class="tab-pane fade" id="tab_content11" aria-labelledby="profile-tab">
                    <div class="form-group">
                        <div class="template_helper col-sm-12">
                        {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                        <br><br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label class="col-sm-2 control-label">{% trans "Error Template" %}</label>
                            <div class="col-sm-10">
                                <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Content for the error page"%}" data-placement="right" id="id_html_error" name="html_error">{{ template.html_error|safe }}</textarea>
                                {{form.html_error.errors}}
                            </div>
                        </div>
                        <div class="template_helper col-sm-6">
                            {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                            <ul>
                                <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                                <li><b style="color:#39454C;">&#123;&#123;message&#125;&#125;</color></b>: {% trans "The message error"%}</li>
                            </ul>

                            <div class="form-group">
                                <label class="control-label">{% trans "403 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 403 error"%}" data-placement="right" id="id_html_error_403" name="html_error_403">{{ template.html_error_403|safe }}</textarea>
                                {{form.html_error_403.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "404 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 404 error"%}" data-placement="right" id="id_html_error_404" name="html_error_404">{{ template.html_error_404|safe }}</textarea>
                                {{form.html_error_404.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "405 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 405 error"%}" data-placement="right" id="id_html_error_405" name="html_error_405">{{ template.html_error_405|safe }}</textarea>
                                {{form.html_error_405.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "406 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 406 error"%}" data-placement="right" id="id_html_error_406" name="html_error_406">{{ template.html_error_406|safe }}</textarea>
                                {{form.html_error_406.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "500 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 500 error"%}" data-placement="right" id="id_html_error_500" name="html_error_500">{{ template.html_error_500|safe }}</textarea>
                                {{form.html_error_500.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "501 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 501 error"%}" data-placement="right" id="id_html_error_501" name="html_error_501">{{ template.html_error_501|safe }}</textarea>
                                {{form.html_error_501.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "502 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 502 error"%}" data-placement="right" id="id_html_error_502" name="html_error_502">{{ template.html_error_502|safe }}</textarea>
                                {{form.html_error_502.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "503 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 503 error"%}" data-placement="right" id="id_html_error_503" name="html_error_503">{{ template.html_error_503|safe }}</textarea>
                                {{form.html_error_503.errors}}
                            </div>
                            <div class="form-group">
                                <label class="control-label">{% trans "504 Error Message" %}</label>
                                <textarea class="form-control has-popover html_error_message" data-container="body" data-content="{%  trans "HTML Content for the 504 error"%}" data-placement="right" id="id_html_error_504" name="html_error_504">{{ template.html_error_504|safe }}</textarea>
                                {{form.html_error_504.errors}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div style="text-align:center;">
                            <button id="preview" class="btn-preview-error btn-save">{% trans "PREVIEW" %}</button>
                            <a href="#" data-toggle="modal" data-target="#show_images">
                            <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                            </a>
                        </div>
                    </div>
                </div>

                <div role="tabpanel" class="tab-pane fade" id="tab_content12" aria-labelledby="profile-tab">
                  <div class="row">
                    <div class="form-group">
                      <div class="template_helper col-sm-12">
                        {% trans "<b><u>Note on Template</u></b>: You can use <b style='color:#39454C;'>Jinja2 Template syntax</b>" %} (<a href="http://jinja.pocoo.org/docs/dev/" target="_blank">http://jinja.pocoo.org/docs/dev/</a>)
                        <br><br>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-offset-3">
                      <label class="col-sm-2 control-label">{% trans "Registration Template" %}</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="template_helper col-md-3">
                      {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                      <ul>
                        <li><b style="color:#39454C;">&#123;&#123;style&#125;&#125;</color></b>: {% trans "The Cascading Style sheet section"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;form_begin&#125;&#125;</color></b>: {% trans "The starting &lt;form action='...'&gt;"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;form_end&#125;&#125;</color></b>: {% trans "The ending &lt;/form&gt;"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_username&#125;&#125;</color></b>: {% trans "The username Input"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;captcha&#125;&#125;</color></b>: {% trans "The captcha"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_captcha&#125;&#125;</color></b>: {% trans "The captcha Input"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;ask_phone&#125;&#125;</color></b>: {% trans "Boolean: True if the phone has to be inquire"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_phone&#125;&#125;</color></b>: {% trans "The phone number Input"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_password_1&#125;&#125;</color></b>: {% trans "The password Input (#1)"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_password_2&#125;&#125;</color></b>: {% trans "The password Input confirmation (#2)"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;input_submit&#125;&#125;</color></b>: {% trans "The 'submit' button"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;step1&#125;&#125;</color></b>: {% trans "Boolean: True if registration step 1"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;step2&#125;&#125;</color></b>: {% trans "Boolean: True if registration step 2"%}</li>
                        <li><b style="color:#39454C;">&#123;&#123;error_message&#125;&#125;</color></b>: {% trans "The message telling what happens"%}</li>
                      </ul>
                    </div>
                    <div class="col-md-5">
                      <textarea class="form-control has-popover" data-container="body" data-content="{%  trans "HTML Contents for the registration page"%}" data-placement="right" id="id_html_registration" name="html_registration">{{ template.html_registration|safe }}</textarea>
                      {{form.html_registration.errors}}
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label class="control-label">{%  trans "Captcha field name" %}</label>
                        {{ form.register_captcha_field }}
                        {{ form.register_captcha_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Username field name" %}</label>
                        {{ form.register_username_field }}
                        {{ form.register_username_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Phone field name" %}</label>
                        {{ form.register_phone_field }}
                        {{ form.register_phone_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Password field name" %}</label>
                        {{ form.register_password1_field }}
                        {{ form.register_password1_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Password confirmation field name" %}</label>
                        {{ form.register_password2_field }}
                        {{ form.register_password2_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Email field name" %}</label>
                        {{ form.register_email_field }}
                        {{ form.register_email_field.errors }}
                      </div>
                      <div class="form-group">
                        <label class="control-label">{%  trans "Submit button name" %}</label>
                        {{ form.register_submit_field }}
                        {{ form.register_submit_field.errors }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-4 control-label">&nbsp;</label>
                      <div class="col-sm-5">
                        <button id="preview" class="btn-preview-registration btn-save">{% trans "PREVIEW" %}</button>
                        <a href="#" data-toggle="modal" data-target="#show_images">
                          <button id="images" class="btn-images-error btn-save">{% trans "Show Images" %}</button>
                        </a>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-2 control-label">{% trans "Email Body:" %}</label>
                      <div class="col-sm-6">
                          <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_email_register_body" name="email_register_body">{{ template.email_register_body|safe }}</textarea>
                          {{form.email_register_body.errors}}
                      </div>
                        <div class="template_helper col-sm-12 col-md-4">
                            {% trans "<b><u>The following tags are available: </u></b>"%}<br>
                            <ul>
                                <li><b style="color:#39454C;">&#123;&#123;registerLink&#125;&#125;</color></b>: {% trans "The URI to confirm registration"%}</li>
                                <li><b style="color:#39454C;">&#123;&#123;app.name&#125;&#125;</color></b>: {% trans "The Name of the app for which we request an account registration"%}</li>
                                <li><b style="color:#39454C;">&#123;&#123;app.url&#125;&#125;</color></b>: {% trans "The URL of the app for which we request an account registrationt"%}</li>
                            </ul>
                        </div>
                    </div>
                  </div>
                  <div class="row">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">{% trans "Email Subject:" %}</label>
                            <div class="col-sm-6">
                                <textarea class="form-control has-popover" data-container="body" data-placement="right" id="id_email_register_subject" name="email_register_subject">{{ template.email_register_subject|safe }}</textarea>
                                {{form.email_register_subject.errors}}
                            </div>
                        </div>
                    </div>
                  <div class="row">
                    <div class="form-group">
                      <label class="col-sm-2 control-label">{% trans "Email From:" %}</label>
                      <div class="col-sm-6">
                          {{form.email_register_from}}
                          {{form.email_register_from.errors}}
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </form>
	</div>

  <div id="show_images" class="modal fade">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">{% trans "Templates Images" %}</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
              {% trans "Click on the image to copy the URI." %}
            </div>

            <div class="col-lg-12 col-md-12 col-sm-12">
              <table class="table table-bordered table-striped table-hover table-heading table-datatable" id="image_list">
                <thead>
                  <tr>
                    <th width="20%">{% trans "Preview" %}</th>
                    <th width="80%"><span><i class="fa fa-clipboard"></i></span>&nbsp;&nbsp;{% trans "URI" %}</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <textarea id="toCopy"></textarea>
{% endblock %}

{% block css_include %}
{% endblock %}

{% block js_include %}
<script src="{% static 'vendors/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'vendors/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<script src="{% static 'vendors/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js' %}"></script>
{% endblock %}

{% block jquery_code %}

    $("#toCopy").hide();

    $(".btn-preview-error").bind('click', previewHTML_error);
    function previewHTML_error(event){
        event.preventDefault()
        var win = window.open('','login_preview');
        var css = $('#id_css').val();
        var error_html = $('#id_html_error').val();
        var error_403 = $('#id_html_error_403').val();
        var error_404 = $('#id_html_error_404').val();
        var error_405 = $('#id_html_error_405').val();
        var error_406 = $('#id_html_error_406').val();
        var error_500 = $('#id_html_error_500').val();
        var error_501 = $('#id_html_error_501').val();
        var error_502 = $('#id_html_error_502').val();
        var error_503 = $('#id_html_error_503').val();
        var error_504 = $('#id_html_error_504').val();

        //css = css.replace('"static', '"/static');
        error_html = error_html.replace('\{\{style\}\}', "<style>" + css + "</style>");
        error_html = error_html.replace('\{\{message\}\}', error_403 + "<br>" + error_404 + "<br>" + error_405 + "<br>" + error_406 + "<br>" + error_500 + "<br>" + error_501 + "<br>" + error_502 + "<br>" + error_503 + "<br>" + error_504);
        win.document.write(error_html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-login").bind("click", previewHTML);
    function previewHTML(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','login_preview');

        var html=$("#id_html_login").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{\{input_login\}\}","<input type='text' name='vltprtlsrnm' class='form-control' placeholder='Login'>");
        html=html.replace("\{\{input_password\}\}","<input type='password' class='form-control' placeholder='Password' name='vltprtlpsswrd'>");
        html=html.replace("\{\{input_submit\}\}","<button class='btn btn-lg btn-warning btn-block btn-signin' type='submit'>Sign in</button>");
        html=html.replace("\{\{input_captcha\}\}","<input type='text' class='form-control' placeholder='Captcha' name='vltprtlcaptcha'>");
        html=html.replace("\{\{captcha\}\}","<img id='captcha' src='/static/img/example_captcha.png' alt='captcha'/>");
        html=html.replace("\{\{lostPassword\}\}","/self/lost");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        //html=html.replace("templates", "");
        html=html.replace("\{\{error_message\}\}", "This is a test error message");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-logout").bind("click", previewHTML2);
    function previewHTML2(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','logout_preview');

        var html=$("#id_html_logout").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace('\{\{app_url\}\}','http://app.example.com/test/');
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-learning").bind("click", previewLearning);
    function previewLearning(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','learning_preview');

        var html=$("#id_html_learning").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{\{input_submit\}\}","<div class='form-group'><input type='text' class='form-control' name='basic_username' value='Sample Value' /></div><div class='form-group'><label class='label'></label><input type='submit' class='btn btn-warning btn-block' value='Ok' /></div>");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-self").bind("click", previewSelf);
    function previewSelf(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','self_preview');

        var html=$("#id_html_self").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        html=html.replace("\{\{changePassword\}\}","/self/change");
        html=html.replace("\{\{error_message\}\}", "This is a test error message");
        //html=html.replace("templates", "");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-password").bind("click", previewPassword);
    function previewPassword(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','password_preview');

        var html=$("#id_html_password").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{\{input_password_old\}\}","<input type='password' name='password_old' value='OldPassword' class='form-control'>");
        html=html.replace("\{\{input_password_1\}\}","<input type='password' name='password_1' value='NewPassW0rD' class='form-control'>");
        html=html.replace("\{\{input_password_2\}\}","<input type='password' name='password_2' value='NewPassW0rD' class='form-control'>");
        html=html.replace("\{\{input_email\}\}","<input type='text' name='email' value='sample@example.com' class='form-control'>");
        html=html.replace("\{\{input_submit\}\}","<input type='submit' class='btn btn-lg btn-warning btn-block btn-signin' value='Ok' />");
        html=html.replace("\{\{input_submit\}\}","<input type='submit' class='btn btn-lg btn-warning btn-block btn-signin' value='Ok' />");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        //html=html.replace("../templates", "");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-otp").bind("click", previewOTP);
    function previewOTP(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','otp_preview');

        var html=$("#id_html_otp").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{\{input_submit\}\}","<button class='btn btn-lg btn-warning btn-block btn-signin' type='submit'>Sign in</button>");
        html=html.replace("\{\{input_key\}\}","<input type='text' class='form-control' placeholder='Key' name='vltprtlkey'>");
        html=html.replace("\{\{resend_button\}\}","<button class='btn btn-lg btn-warning btn-block btn-signin' name='vltotpresend' value='yes' type='submit'>Resend mail/sms</button>");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        //html=html.replace("templates", "");
        html=html.replace("\{\{error_message\}\}", "<b> Error </b> <br> This is a test error message");
        html=html.replace("\{\{qrcode\}\}", 'src="data:image/jpeg;base64, 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"');
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-message").bind("click", previewMessage);
    function previewMessage(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','message_preview');

        var html=$("#id_html_message").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{message\}\}","This is an example message.");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        html=html.replace("../templates", "");
        html=html.replace("\{\{link_redirect\}\}", "#");
        html=html.replace("\{\{error_message\}\}", "This is a test error message");
        html=html.replace(/\{% if [\w\W]* %\}([\s\w\W]*)\{% endif %\}/g, "$1");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $(".btn-preview-registration").bind("click", previewRegistration);
    function previewRegistration(event){
        event.preventDefault();
        var css=$('#id_css').val();
        var win = window.open('','registration_preview');

        var html=$("#id_html_registration").val();
        //css=css.replace('"static','"/static');
        html=html.replace('\{\{style\}\}','<style>'+css+'</style>');
        html=html.replace("\{\{form_begin\}\}","<form action='/login' method='POST' autocomplete='off'>");
        html=html.replace("\{\{form_end\}\}","</form>");
        html=html.replace("\{\{input_email\}\}","<input type='text' name='vltrgstremail' value='Email' class='form-control'>");
        html=html.replace("\{\{error_message\}\}","An error occured <br> <b>Please contact your administrator</b>");
        html=html.replace("\{\{input_username\}\}","<input type='text' name='username' value='Username' class='form-control'>");
        html=html.replace("\{\{captcha\}\}","<img id='captcha' src='/static/img/example_captcha.png' alt='captcha'/>");
        html=html.replace("\{\{input_captcha\}\}","<input type='text' name='captcha' value='Captcha' class='form-control'>");
        html=html.replace("\{\{input_phone\}\}","<input type='text' name='phone' value='Phone number' class='form-control'>");
        html=html.replace("\{\{input_password_1\}\}","<input type='password' name='password_1' value='Password' class='form-control'>");
        html=html.replace("\{\{input_password_2\}\}","<input type='password' name='password_2' value='Password' class='form-control'>");
        html=html.replace("\{\{input_submit\}\}","<input type='submit' class='btn btn-lg btn-warning btn-block btn-signin' value='Ok' />");
        html=html.replace("\{\{input_submit\}\}","<input type='submit' class='btn btn-lg btn-warning btn-block btn-signin' value='Ok' />");
        html=html.replace("\{% csrf_token %\}","");
        html=html.replace("\{% autoescape off %\}","");
        html=html.replace("\{% endautoescape %\}","");
        //html=html.replace("../templates", "");
        html=html.replace(/\{\%(.*)\%\}/g, "");
        win.document.write(html);
        /* No need to write end, it is already in form */
        //win.document.write('</body></html>');
    }

    $('#image_list').DataTable({
        "searching": false,
        "dom": "<p<'searchbox'f><t>>",
        "iDisplayLength": 6,
        "autoWidth": false,
        "order": [[1, 'asc']],
        "aoColumns": [
            {'mData': 'preview', 'name': 'preview', 'aTargets': [0], 'bSortable': false, 'mRender': function(data, type, row){
                return "<img src='" + data + "' style='width: 100%; height:auto;' />";
            }},
            {'mData': 'uri', 'name': 'uri', 'aTargets': [1], 'bSortable': false},
        ],
        "language": {
            "lengthMenu": '_MENU_',
            "pagingType": "bootstrap",
            "paginate": {
                "next": '<img src="{% static 'img/right.png' %}"/>',
                "previous": '<img src="{% static 'img/left.png' %}"/>'
            }
        },
    });

    {% for img in images %}
        $('#image_list').dataTable().fnAddData({'preview': '{{ img.create_preview_html }}', 'uri': '{{ img.get_image_uri }}'});
    {%  endfor %}

    function copy(text){
        $('#toCopy').val(text);
        $('#toCopy').show();
        toCopy.select();
        document.execCommand('copy');
        $('#toCopy').hide();
        return false;
    }

    $('#image_list tbody tr').on( 'click', function () {
        var text = $(this).text();
        copy(text);

        new PNotify({
            title: 'URI Copied',
            text: 'Press Ctrl+v to paste the image URI.',
            type: 'success',
            styling: 'bootstrap3',
            nonblock: {
                nonblock: true
            }
        });

    });

{% endblock %}